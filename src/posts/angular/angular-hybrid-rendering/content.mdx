---
title: ğŸ“— Angular Hybrid Rendering
date: 2022-10-27
desc: Angular Hybrid Rendering ë°©ë²•ì„ ì•Œì•„ë³´ì
thumbnail: /posts/angular/angular-hybrid-rendering/image1.png
---

ì´ì „ ê¸€ì—ì„œ CSR, SSR, SSGì— ëŒ€í•´ ê°ê°ì˜ ì°¨ì´ì ì— ëŒ€í•´ì„œ ë‹¤ë¤„ ë³´ì•˜ìŠµë‹ˆë‹¤. Angular, React, Vueì—ì„œ ê°ê°ì˜ ë°©ì‹ìœ¼ë¡œ ì´ëŸ¬í•œ ë Œë”ë§ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ì„ í•  ìˆ˜ê°€ ìˆëŠ”ë°ìš”. ëŒ€í‘œì ìœ¼ë¡œ AngularëŠ” Universal, ReactëŠ” NextJs, VueëŠ” Nuxt ë“±ì„ ë§ì´ ì‚¬ìš©í•˜ëŠ” ê²ƒ ê°™ë„¤ìš”. AngularëŠ” êµ­ë‚´ì—ì„œ ì¸ê¸°ê°€ ë§ì´ ì—†ì–´ì„œì¸ì§€ í•´ë‹¹ ë‚´ìš©ì„ ë‹¤ë£¨ëŠ” ê¸€ì´ ì—†ëŠ”ë“¯í•˜ì—¬ ì´ë²ˆ ê¸°íšŒì— ì œê°€ ì‚¬ìš©ì„ í•´ë³´ê³  ê°„ë‹¨í•˜ê²Œë‚˜ë§ˆ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.

ë Œë”ë§ ì¢…ë¥˜ì— ëŒ€í•œ ê¸€ì€ [ì—¬ê¸°](https://blog.devtimes.com/server-client-side-rendering/)ë¥¼ ì°¸ê³ 

ê²°ë¡ ë¶€í„° ë§ì”€ë“œë¦¬ë©´ êµ‰ì¥íˆ ì‰½ìŠµë‹ˆë‹¤!

ë¨¼ì € ê°„ë‹¨í•˜ê²Œ ê°œë… ì •ë„ë§Œ ë‹¤ì‹œ ì§šê³  ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.

## PreRendering

ìš°ë¦¬ì—ê²Œ ê°€ì¥ ìµìˆ™í•œ í´ë¼ì´ì–¸íŠ¸ ë Œë”ë§(CSR) ë°©ì‹ì€ ì˜ ì•„ì‹¤ í…Œê³ , ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§(SSR)ì€ ê° í˜ì´ì§€ì— ëŒ€í•œ ìš”ì²­ì„ ë°›ìœ¼ë©´ ë¸Œë¼ìš°ì € ì—”ì§„ì„ ëŒ€ì‹ í•´ì„œ ì„œë²„ì—ì„œ Nodeê°€ ë Œë”ë§í•˜ê³  ê²°ê³¼ë¬¼ì„ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì „ë‹¬í•´ì£¼ëŠ” ê²ƒì´ê³ , ì‚¬ì „ ë Œë”ë§(PreRendering, SSG) ë§ ê·¸ëŒ€ë¡œ ë¯¸ë¦¬ ë Œë”ë§ì„ í•´ë†“ê³  ì„œë²„ì—ì„œ í•´ë‹¹ í˜ì´ì§€ì— ëŒ€í•œ ìš”ì²­ì´ ì˜¤ë©´ ë¯¸ë¦¬ ë Œë”ë§í•´ë‘ì—ˆë˜ í˜ì´ì§€ë¥¼ ì „ë‹¬!

ì ì´ì œ ëˆ„êµ¬ë„ ì•Œë ¤ì£¼ì§€ ì•Šì•˜ë˜, Angular Universalì„ ì´ìš©í•´ í•˜ì´ë¸Œë¦¬ë“œ ë Œë”ë§ì„ êµ¬í˜„í•´ ë³´ê² ìŠµë‹ˆë‹¤.

## Universal

`hybrid-rendering-app` ì´ë¼ëŠ” ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ê³  universal packageë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.

~~~bash
ng new hybrid-rendering-app

ng add @nguniversal/express-engine
~~~

`@nguniversal/express-engine`ì„ ì¶”ê°€ í•´ì£¼ë©´ `main.server.ts`, `app.server.module.ts`ê³¼ ê°™ì€ ë­”ê°€ ëª»ë³´ë˜ íŒŒì¼ë“¤ì´ ìƒê²¨ë‚˜ëŠ” ê²ƒì„ ë³´ì‹¤ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì§€ê¸ˆê» ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ë Œë”ë§ì„ ì‚¬ìš©í–ˆì§€ë§Œ, ì´ì œ ë¸Œë¼ìš°ì € í™˜ê²½ì´ ì•„ë‹Œê³³ì—ì„œ ë Œë”ë§ì„ í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— Nodeê°€ ì‹¤í–‰í•´ì¤„ íŒŒì¼ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

`package.json` íŒŒì¼ì„ ë³´ë©´ ì²˜ìŒ ë³´ëŠ” scriptsë“¤ë„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
~~~
    "dev:ssr": "ng run hybrid-rendering-app:serve-ssr",
    "serve:ssr": "node dist/hybrid-rendering-app/server/main.js",
    "build:ssr": "ng build && ng run hybrid-rendering-app:server",
    "prerender": "ng run hybrid-rendering-app:prerender"
~~~
í‚¤ê°’ëª…ì¹­ì„ ë³´ë©´ ëŒ€ì¶© ì–´ë–¤ê²ƒì„ í•˜ëŠ”ê²ƒì´ê² êµ¬ë‚˜.. í•˜ëŠ” ì •ë„ì˜ ê°ì€ ì˜¤ì…¨ì„ ê²ë‹ˆë‹¤.

ë¨¼ì € `prerendering`ì„ í•´ë³´ê¸° ìœ„í•´ route í˜ì´ì§€ê°€ í•„ìš”í•œë°, aboutì™€ contact ëª¨ë“ˆì„ ì¶”ê°€í•˜ê³  ë¼ìš°í„°ì— ë“±ë¡ ì‹œì¼œë³´ê² ìŠµë‹ˆë‹¤.

ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•´ routerì— ë“±ë¡í•´ë„ ë˜ì§€ë§Œ ì•„ë˜ì™€ ê°™ì€ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (Angular í”„ë ˆì„ì›ì˜ ì¥ì  ì´ê¸°ë„ í•˜ì£ , ë³µì¡í•´ ë³´ì´ì§€ë§Œ ì²´ê³„ì ì´ë‹¤? ^^;)

~~~bash
ng g m about --route about --module app

ng g m contact --route contact --module app
~~~

## Run

ë°”ë¡œ ì‚¬ì „ ë Œë”ë§ì„ í•´ë³´ì£ !

~~~
npm run prerender
~~~

![01](/posts/angular/angular-hybrid-rendering/image1.png)

dist ë””ë ‰í† ë¦¬ë¥¼ ë³´ì‹œë©´ server, browser ë‘ê°œì˜ ë””ë ‰í† ë¦¬ë¡œ ë‚˜ëˆ„ì–´ì ¸ ìˆë„¤ìš”. server/main.js ì´ íŒŒì¼ì´ nodeì—ì„œ ì‹¤í–‰í•´ì£¼ëŠ” íŒŒì¼ì´ ë˜ëŠ”ê²ƒì´ê³ ìš”, browser ë””ë ‰í† ë¦¬ ë‚´ë¶€ì— ìˆëŠ” íŒŒì¼ë“¤ì´ ë Œë”ë§ëœ íŒŒì¼ë“¤ì…ë‹ˆë‹¤. ê·¸ëŸ°ë° index.html íŒŒì¼ë§Œ ìˆëŠ”ê²Œ ì•„ë‹ˆê³  routerì— ë“±ë¡í•œ about, contactì˜ index.htmlíŒŒì¼ë„ ê°ê°ì˜ ë””ë ‰í† ë¦¬ì— ìƒì„±ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.
ê°ê°ì˜ í˜ì´ì§€ ìš”ì²­ì´ ì˜¤ë©´ ë¯¸ë¦¬ ëœë”ë§í•´ë‘” index.htmlíŒŒì¼ì„ ì „ë‹¬í•˜ê¸° ìœ„í•¨ì´ì£ .

## Options

ê·¸ë¦¬ê³  `angular.json` íŒŒì¼ì˜ ì˜µì…˜ì •ë³´ë¥¼ ì´ìš©í•´ì„œ ì›í•˜ëŠ” í˜ì´ì§€ë§Œ ì‚¬ì „ ë Œë”ë§ì„ í•´ë‘˜ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ about í˜ì´ì§€ë§Œ ì‚¬ì „ ë Œë”ë§ì„ í•´ë‘ê³  ì‹¶ë‹¤. ê·¸ëŸ¼ `"guessRoutes": false`, `"routes"` ë°°ì—´ì— ë Œë”ë§í•  í˜ì´ì§€ë§Œ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.

projects > hybrid-rendering-app > architect > prerender

~~~
"options" : {
  "guessRoutes": false,
  "routes": [
    "/about"
  ]
}
~~~

"routesFile": "./routes.txt" íŒŒì¼ì— ê²½ë¡œë“¤ì„ ì„¤ì •í• ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ë” ìì„¸í•œ `options` ì •ë³´ëŠ” [ì—¬ê¸°](https://angular.io/guide/prerendering#build-options-for-prerendering)ì—ì„œ í™•ì¸í•´ ì£¼ì„¸ìš”

ì´ì œ nodeë¡œ í•´ë‹¹ jsíŒŒì¼ì„ ì‹¤í–‰í•´ì£¼ë©´ ë©ë‹ˆë‹¤.

## Server Start

~~~
node dist\hybrid-rendering-app\server\main.js
~~~

Node Express server listening on http://localhost:4000

ì„œë²„ë¥¼ êµ¬ë™í•´ì£¼ê³  ë¸Œë¼ìš°ì €ì— ì ‘ì†í•´ì„œ Network íƒ­ì„ ì‚´í´ ë³´ë©´ ê° ë¼ìš°íŒ…ì— ì ‘ê·¼í•  ë•Œë§ˆë‹¤ í•´ë‹¹ ë¬¸ì„œë¥¼ ë‹¤ìš´ë°›ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`main`
![main](/posts/angular/angular-hybrid-rendering/doc1.png)

`about`
![about](/posts/angular/angular-hybrid-rendering/doc2.png)

`contact`
![contact](/posts/angular/angular-hybrid-rendering/doc3.png)

ìµœì´ˆ ì ‘ì†ì‹œ index.html íŒŒì¼ì„ ë°›ì•„ ê·¸ì•ˆì—ì„œ javascript íŒŒì¼ì— ì˜í•´ ë™ì ìœ¼ë¡œ ë¬¸ì„œë¥¼ ë³€ê²½í•˜ëŠ” SPAë°©ì‹ê³¼ëŠ” ë‹¬ë¦¬ ë¼ìš°í„° ì ‘ê·¼ì‹œ ì‚¬ì „ì— ë Œë”ë§ëœ ë¬¸ì„œë¥¼ ì„œë²„ì—ì„œ ì „ë‹¬í•´ì£¼ê²Œ ë©ë‹ˆë‹¤.

ê±°ì˜ ë³€ê²½ì´ ì—†ëŠ” í˜ì´ì§€ë“¤ì˜ ê²½ìš° ì´ë ‡ê²Œ ì‚¬ì „ì— ë Œë”ë§ì„ í•´ë‘ë©´ ì„±ëŠ¥ì ì¸ ë¶€ë¶„ì—ì„œ ë§¤ìš° íš¨íœ¼ì ì¼ ê²ƒì´ì§€ë§Œ, í˜ì´ì§€ ë‚´ìš©ì´ ìì£¼ ë³€ê²½ì´ ëœë‹¤ê±°ë‚˜ ê²Œì‹œíŒ ê°™ì€ ë™ì ì¸ ë¼ìš°íŒ…ì„ ì‚¬ìš©í•œë‹¤ë©´, `options`ì— ë Œë”ë§í•  í˜ì´ì§€ë§Œ ëª…ì‹œí•´ì£¼ë©´ ì„ íƒì ìœ¼ë¡œ ì‚¬ì „ ë Œë”ë§ì„ í•  ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒ ì…ë‹ˆë‹¤.